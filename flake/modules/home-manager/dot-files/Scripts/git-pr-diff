#!/usr/bin/env bash

set -euo pipefail

current_branch=$(git symbolic-ref --short HEAD)
remote=$(git remote | grep -q upstream && echo "upstream" || echo "origin")

echo "ðŸ“¡ Fetching $remote..." >&2
git fetch "$remote"

echo -e "\nâ”€â”€ ðŸ“‹ PR Diff (commits not in $remote/main) â”€â”€" >&2
git diff "$remote/main...$current_branch"

echo -e "\nâ”€â”€ ðŸ“ Working Directory (staged + unstaged + untracked) â”€â”€" >&2
git-local-diff
